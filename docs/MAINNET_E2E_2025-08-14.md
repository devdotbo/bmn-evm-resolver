# BMN Atomic Swap – Mainnet E2E Run (2025‑08‑14)

Hashlock: `0x534f63afed3967d382203e351a5b068aa705c4a017ef5b85e250e5f5a2e32ad3`

```text
Atomic Swap Flow (annotated)

          BASE (8453)                                                     OPTIMISM (10)
┌──────────────────────────────┐                                 ┌──────────────────────────────┐
│ [1] Alice (maker)            │                                 │                              │
│     0x240E...72FFFd8         │                                 │                              │
└──────────────┬───────────────┘                                 │                              │
               │ off‑chain signed order (EIP‑712)                │                              │
               │                                                 │                              │
┌──────────────▼───────────────┐   [5] fill tx                   │                              │
│ [2] Bob / Resolver (taker)   │ ───────────────▶ 0x4df862...219d│                              │
│     0xfdF1...C312b7B5        │   (Base LOP fill)               │                              │
└──────────────┬───────────────┘                                 │                              │
               │ postInteraction                                 │                              │
               │                                                 │                              │
┌──────────────▼───────────────┐                                 │                              │
│ [3] LimitOrderProtocol       │                                 │                              │
│     0xe767...71489           │                                 │                              │
└──────────────┬───────────────┘                                 │                              │
               │ calls                                           │  create dst escrow           │
               │ postInteraction()                               │  [6] tx 0xc0f21f...fbc7      │
               │                                                 │                              │
┌──────────────▼───────────────┐                         ┌───────▼─────────────────────────┐
│ [4] SimplifiedEscrowFactory  │                         │ [4] SimplifiedEscrowFactory (OP)│
│     0xdebE...dDA9FE0A        │                         │     0xdebE...dDA9FE0A           │
└──────────────┬───────────────┘                         └────────┬────────────────────────┘
               │ creates src escrow                               │ creates
               │ escrows[hashlock] →                               │
               │ [7] 0xd6AF...B0B2b9A18                           │
               │                                                 ┌─▼────────────────────────┐
               │                                                 │ [8] Dst Escrow (OP)       │
               │                                                 │     0x5925919D...3D0BfC9 │
               │                                                 └─┬────────────────────────┘
               │                                                   │ withdraw (secret reveal)
               │                                                   │ [9] tx 0xb725ec...b5876d26
┌──────────────▼───────────────┐                                   │
│ [7] Src Escrow (Base)        │ ◀──────── withdraw after reveal ─┘
│     0xd6AF...B0B2b9A18       │     [10] tx 0xe1c1e0...1ffa90
└──────────────────────────────┘

Shared addresses (CREATE3):
  [4] SimplifiedEscrowFactory: 0xdebE6F4bC7BaAD2266603Ba7AfEB3BB6dDA9FE0A (Base & OP)
  [3] LimitOrderProtocol:      0xe767105dcfB3034a346578afd2aFD8e583171489 (Base & OP)
  [11] BMN Token:              0x8287CD2aC7E227D9D927F998EB600a0683a832A1 (Base & OP)
```

## References

1. Alice (maker): `0x240E2588e35FB9D3D60B283B45108a49972FFFd8`
2. Bob / Resolver (taker): `0xfdF1dDeB176BEA06c7430166e67E615bC312b7B5`
3. LimitOrderProtocol: `0xe767105dcfB3034a346578afd2aFD8e583171489` (Base & OP)
4. SimplifiedEscrowFactory: `0xdebE6F4bC7BaAD2266603Ba7AfEB3BB6dDA9FE0A` (Base & OP)
5. Fill (Base): https://basescan.org/tx/0x4df862bb836ed26bb2f4287b19231f13b3aa8de8025c15cf34c6433ffd5d219d
6. Create Dst Escrow (OP): https://optimistic.etherscan.io/tx/0xc0f21f6e46cfd188c1c561b512a80ec18cfa33b3315fba2fdd4ad84c0bb1fbc7
7. Src Escrow (Base): `0xd6AFf963b14485b1ACdE1535C7C52bfB0B2b9A18`
8. Dst Escrow (OP): `0x5925919Ddd33971AAeA953d6F8A2bac303D0BfC9`
9. Withdraw (OP): https://optimistic.etherscan.io/tx/0xb725ec97e7b629b16bd6db75bd75459eac6affdee7a3d737ff368f84b5876d26
10. Withdraw (Base): https://basescan.org/tx/0xe1c1e07e73908b5dab633120739d6a18f6757359a61452ef4ccd4dcc131ffa90
11. BMN Token: `0x8287CD2aC7E227D9D927F998EB600a0683a832A1` (Base & OP)

Notes:
- PostInteraction offsets header is 32 bytes; we strip once, then parse 20‑byte factory + ABI payload.
- Writes use automatic gas estimation; no hardcoded gas.
- Source withdraw uses reconstructed source immutables with fill block timestamp as deployedAt.


